#2020-05-31
在分布式系统中，多个系统（微服务）通过RPC restful接口通信时，多次调用产生的效果相同。如：订单系统下单成功
后调用支付系统，如果第一次调用后处理成功但在返回结果时网络发生问题，用户点击触发第二次调用，如果不保证幂等性，
会二次扣款。
增删改查中，查，删（不考虑返回接口）时天然幂等的。
如果保证幂等：
1、增加唯一id:不同场景id选择不同，以上述支付场景为例，可选择orderid,每次付款时检查此id订单是否已付款
2、增加token,步骤：a):生成全局唯一token,存放在jvm内存或redis中，每次页面请求时获取放到pageScope中，
b):携带token至后台验证，进行逻辑处理成功后删除token,生产新的token更新reids，这样下次页面请求时token验证
失败，禁止页面跳转支付